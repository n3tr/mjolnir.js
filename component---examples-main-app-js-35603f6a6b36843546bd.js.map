{"version":3,"sources":["webpack:///../src/utils/hammer-overrides.js","webpack:///../src/utils/hammer.browser.js","webpack:///../src/utils/hammer-manager-mock.js","webpack:///../src/constants.js","webpack:///../src/inputs/wheel-input.js","webpack:///../src/inputs/move-input.js","webpack:///../src/inputs/key-input.js","webpack:///../src/inputs/contextmenu-input.js","webpack:///../src/utils/event-utils.js","webpack:///../src/utils/event-registrar.js","webpack:///../src/event-manager.js","webpack:///../src/index.js","webpack:///../examples/main/constants.js","webpack:///../examples/main/app.js","webpack:///../src/utils/globals.js"],"names":["INPUT_START","INPUT_MOVE","INPUT_END","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","i","array","predict","oldHandler","PointerEventInput","store","ev","some","e","MouseInput","eventType","pointers","changedPointers","pointerType","srcEvent","hammerjs","require","enhancePointerEventInput","enhanceMouseInput","instance","chainedNoop","RECOGNIZERS","Hammer","enable","threshold","event","taps","RECOGNIZER_COMPATIBLE_MAP","rotate","pan","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","pointerdown","pointermove","pointerup","touchstart","touchmove","touchend","INPUT_EVENT_TYPES","KEY_EVENTS","MOUSE_EVENTS","WHEEL_EVENTS","EVENT_RECOGNIZER_MAP","tap","press","pinch","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","panstart","panmove","panup","pandown","panleft","panright","panend","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","click","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","userAgent","EVENT_TYPE","WHEEL_DELTA_MAGIC_SCALER","WHEEL_DELTA_PER_LINE","SHIFT_MULTIPLIER","WheelInput","options","element","passiveSupported","passive","destroy","enableEventType","handleEvent","value","window","wheelPosition","x","y","clientY","Math","_onWheel","type","center","delta","target","MOVE_EVENT_TYPE","OVER_EVENT_TYPE","OUT_EVENT_TYPE","LEAVE_EVENT_TYPE","MoveInput","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","DOWN_EVENT_TYPE","UP_EVENT_TYPE","KeyInput","targetElement","key","ContextmenuInput","DOWN_EVENT","MOVE_EVENT","UP_EVENT","MOUSE_EVENT_WHICH_LEFT","MOUSE_EVENT_WHICH_MIDDLE","MOUSE_EVENT_WHICH_RIGHT","MOUSE_EVENT_BUTTON_LEFT","MOUSE_EVENT_BUTTON_MIDDLE","MOUSE_EVENT_BUTTON_RIGHT","MOUSE_EVENT_BUTTONS_LEFT_MASK","MOUSE_EVENT_BUTTONS_RIGHT_MASK","MOUSE_EVENT_BUTTONS_MIDDLE_MASK","buttons","button","which","leftButton","middleButton","rightButton","Number","Boolean","rect","rootElement","scaleX","scaleY","offsetCenter","EventRegistrar","isEmpty","add","srcElement","handlers","handlersByElement","entry","handler","remove","entries","mjolnirEvent","_emit","immediatePropagationStopped","stopPropagation","stopImmediatePropagation","_normalizeEvent","whichButtons","getOffsetPosition","handled","DEFAULT_OPTIONS","events","recognizers","recognizerOptions","Manager","touchAction","EventManager","Object","setElement","ManagerClass","recognizer","recognizerOption","eventAlias","eventRegistrar","on","off","_toggleRecognizer","manager","enabled","fallbackRecognizers","otherRecognizer","_addEventHandler","_removeEventHandler","recognizerName","isRecognizerUsed","eh","_onBasicInput","alias","_onOtherEvent","EVENTS","INITIAL_OPTIONS","wheel","App","eventListeners","_onLoad","_onLoadRedBox","_onUpdateOption","evt","name","checked","_handleEvent","_renderCheckbox","id","eventName","_renderEvent","index","render","Component","navigator","window_","global_","document_"],"mappings":"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","file":"component---examples-main-app-js-35603f6a6b36843546bd.js","sourcesContent":["/**\n * This file contains overrides the default\n * hammer.js functions to add our own utility\n */\n\n/* Hammer.js constants */\nconst INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n\n/**\n * Helper function that returns true if any element in an array meets given criteria.\n * Because older browsers do not support `Array.prototype.some`\n * @params array {Array}\n * @params predict {Function}\n */\nfunction some(array, predict) {\n  for (let i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/* eslint-disable no-invalid-this */\nexport function enhancePointerEventInput(PointerEventInput) {\n  const oldHandler = PointerEventInput.prototype.handler;\n\n  // overrides PointerEventInput.handler to accept right mouse button\n  PointerEventInput.prototype.handler = function handler(ev) {\n    const store = this.store;\n\n    // Allow non-left mouse buttons through\n    if (ev.button > 0) {\n      if (!some(store, e => e.pointerId === ev.pointerId)) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n}\n\n// overrides MouseInput.handler to accept right mouse button\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    let eventType = MOUSE_INPUT_MAP[ev.type];\n\n    // on start we want to have the mouse button down\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    }\n\n    // mouse must be down\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {enhancePointerEventInput, enhanceMouseInput} from './hammer-overrides';\n\nlet hammerjs = null;\n\nif (typeof document !== 'undefined') {\n  // Avoid crash if imported in a web worker\n  hammerjs = require('hammerjs');\n  enhancePointerEventInput(hammerjs.PointerEventInput);\n  enhanceMouseInput(hammerjs.MouseInput);\n}\n\nexport default hammerjs;\n","// Hammer.Manager mock for use in environments without `document` / `window`.\nexport default function HammerManagerMock(m) {\n  const instance = {};\n  const chainedNoop = () => instance;\n  instance.get = () => null;\n  instance.set = chainedNoop;\n  instance.on = chainedNoop;\n  instance.off = chainedNoop;\n  instance.destroy = chainedNoop;\n  instance.emit = chainedNoop;\n  return instance;\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport Hammer from './utils/hammer';\n\n// This module contains constants that must be conditionally required\n// due to `window`/`document` references downstream.\nexport const RECOGNIZERS = Hammer\n  ? [\n      [Hammer.Rotate, {enable: false}],\n      [Hammer.Pinch, {enable: false}],\n      [Hammer.Swipe, {enable: false}],\n      [Hammer.Pan, {threshold: 0, enable: false}],\n      [Hammer.Press, {enable: false}],\n      [Hammer.Tap, {event: 'doubletap', taps: 2, enable: false}],\n      // TODO - rename to 'tap' and 'singletap' in the next major release\n      [Hammer.Tap, {event: 'anytap', enable: false}],\n      [Hammer.Tap, {enable: false}]\n    ]\n  : null;\n\n// Recognize the following gestures even if a given recognizer succeeds\nexport const RECOGNIZER_COMPATIBLE_MAP = {\n  rotate: ['pinch'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n};\n\n// Recognize the folling gestures only if a given recognizer fails\nexport const RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\n\n/**\n * Only one set of basic input events will be fired by Hammer.js:\n * either pointer, touch, or mouse, depending on system support.\n * In order to enable an application to be agnostic of system support,\n * alias basic input events into \"classes\" of events: down, move, and up.\n * See `_onBasicInput()` for usage of these aliases.\n */\nexport const BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\n\nexport const INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: [\n    // Chrome, Safari\n    'wheel',\n    // IE\n    'mousewheel',\n    // legacy Firefox\n    'DOMMouseScroll'\n  ]\n};\n\n/**\n * \"Gestural\" events are those that have semantic meaning beyond the basic input event,\n * e.g. a click or tap is a sequence of `down` and `up` events with no `move` event in between.\n * Hammer.js handles these with its Recognizer system;\n * this block maps event names to the Recognizers required to detect the events.\n */\nexport const EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\n\n/**\n * Map gestural events typically provided by browsers\n * that are not reported in 'hammer.input' events\n * to corresponding Hammer.js gestures.\n */\nexport const GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {INPUT_EVENT_TYPES} from '../constants';\nimport {window, userAgent, passiveSupported} from '../utils/globals';\n\nconst firefox = userAgent.indexOf('firefox') !== -1;\n\nconst {WHEEL_EVENTS} = INPUT_EVENT_TYPES;\nconst EVENT_TYPE = 'wheel';\n\n// Constants for normalizing input delta\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\n// Slow down zoom if shift key is held for more precise zooming\nconst SHIFT_MULTIPLIER = 0.25;\n\nexport default class WheelInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n\n    this.options = Object.assign({enable: true}, options);\n\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(event =>\n      element.addEventListener(event, this.handleEvent, passiveSupported ? {passive: false} : false)\n    );\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  /**\n   * Enable this input (begin processing events)\n   * if the specified event type is among those handled by this input.\n   */\n  enableEventType(eventType, enabled) {\n    if (eventType === EVENT_TYPE) {\n      this.options.enable = enabled;\n    }\n  }\n\n  /* eslint-disable complexity, max-statements */\n  handleEvent(event) {\n    if (!this.options.enable) {\n      return;\n    }\n\n    let value = event.deltaY;\n    if (window.WheelEvent) {\n      // Firefox doubles the values on retina screens...\n      if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n        value /= window.devicePixelRatio;\n      }\n      if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n        value *= WHEEL_DELTA_PER_LINE;\n      }\n    }\n\n    const wheelPosition = {\n      x: event.clientX,\n      y: event.clientY\n    };\n\n    if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n      // This one is definitely a mouse wheel event.\n      // Normalize this value to match trackpad.\n      value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n    }\n\n    if (event.shiftKey && value) {\n      value = value * SHIFT_MULTIPLIER;\n    }\n\n    this._onWheel(event, -value, wheelPosition);\n  }\n\n  _onWheel(srcEvent, delta, position) {\n    this.callback({\n      type: EVENT_TYPE,\n      center: position,\n      delta,\n      srcEvent,\n      pointerType: 'mouse',\n      target: srcEvent.target\n    });\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {INPUT_EVENT_TYPES} from '../constants';\n\nconst {MOUSE_EVENTS} = INPUT_EVENT_TYPES;\nconst MOVE_EVENT_TYPE = 'pointermove';\nconst OVER_EVENT_TYPE = 'pointerover';\nconst OUT_EVENT_TYPE = 'pointerout';\nconst LEAVE_EVENT_TYPE = 'pointerleave';\n\n/**\n * Hammer.js swallows 'move' events (for pointer/touch/mouse)\n * when the pointer is not down. This class sets up a handler\n * specifically for these events to work around this limitation.\n * Note that this could be extended to more intelligently handle\n * move events across input types, e.g. storing multiple simultaneous\n * pointer/touch events, calculating speed/direction, etc.\n */\nexport default class MoveInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n\n    this.options = Object.assign({enable: true}, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  /**\n   * Enable this input (begin processing events)\n   * if the specified event type is among those handled by this input.\n   */\n  enableEventType(eventType, enabled) {\n    if (eventType === MOVE_EVENT_TYPE) {\n      this.enableMoveEvent = enabled;\n    }\n    if (eventType === OVER_EVENT_TYPE) {\n      this.enableOverEvent = enabled;\n    }\n    if (eventType === OUT_EVENT_TYPE) {\n      this.enableOutEvent = enabled;\n    }\n    if (eventType === LEAVE_EVENT_TYPE) {\n      this.enableLeaveEvent = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    this.handleOverEvent(event);\n    this.handleOutEvent(event);\n    this.handleLeaveEvent(event);\n    this.handleMoveEvent(event);\n  }\n\n  handleOverEvent(event) {\n    if (this.enableOverEvent) {\n      if (event.type === 'mouseover') {\n        this.callback({\n          type: OVER_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleOutEvent(event) {\n    if (this.enableOutEvent) {\n      if (event.type === 'mouseout') {\n        this.callback({\n          type: OUT_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleLeaveEvent(event) {\n    if (this.enableLeaveEvent) {\n      if (event.type === 'mouseleave') {\n        this.callback({\n          type: LEAVE_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleMoveEvent(event) {\n    if (this.enableMoveEvent) {\n      switch (event.type) {\n        case 'mousedown':\n          if (event.button >= 0) {\n            // Button is down\n            this.pressed = true;\n          }\n          break;\n        case 'mousemove':\n          // Move events use `which` to track the button being pressed\n          if (event.which === 0) {\n            // Button is not down\n            this.pressed = false;\n          }\n          if (!this.pressed) {\n            // Drag events are emitted by hammer already\n            // we just need to emit the move event on hover\n            this.callback({\n              type: MOVE_EVENT_TYPE,\n              srcEvent: event,\n              pointerType: 'mouse',\n              target: event.target\n            });\n          }\n          break;\n        case 'mouseup':\n          this.pressed = false;\n          break;\n        default:\n      }\n    }\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {INPUT_EVENT_TYPES} from '../constants';\n\nconst {KEY_EVENTS} = INPUT_EVENT_TYPES;\nconst DOWN_EVENT_TYPE = 'keydown';\nconst UP_EVENT_TYPE = 'keyup';\n\nexport default class KeyInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n\n    this.options = Object.assign({enable: true}, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n\n    this.events = KEY_EVENTS.concat(options.events || []);\n\n    this.handleEvent = this.handleEvent.bind(this);\n\n    element.tabIndex = 1;\n    element.style.outline = 'none';\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  /**\n   * Enable this input (begin processing events)\n   * if the specified event type is among those handled by this input.\n   */\n  enableEventType(eventType, enabled) {\n    if (eventType === DOWN_EVENT_TYPE) {\n      this.enableDownEvent = enabled;\n    }\n    if (eventType === UP_EVENT_TYPE) {\n      this.enableUpEvent = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    // Ignore if focused on text input\n    const targetElement = event.target || event.srcElement;\n    if (\n      (targetElement.tagName === 'INPUT' && targetElement.type === 'text') ||\n      targetElement.tagName === 'TEXTAREA'\n    ) {\n      return;\n    }\n\n    if (this.enableDownEvent && event.type === 'keydown') {\n      this.callback({\n        type: DOWN_EVENT_TYPE,\n        srcEvent: event,\n        key: event.key,\n        target: event.target\n      });\n    }\n\n    if (this.enableUpEvent && event.type === 'keyup') {\n      this.callback({\n        type: UP_EVENT_TYPE,\n        srcEvent: event,\n        key: event.key,\n        target: event.target\n      });\n    }\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nconst EVENT_TYPE = 'contextmenu';\n\nexport default class ContextmenuInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n\n    this.options = Object.assign({enable: true}, options);\n\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  destroy() {\n    this.element.removeEventListener('contextmenu', this.handleEvent);\n  }\n\n  /**\n   * Enable this input (begin processing events)\n   * if the specified event type is among those handled by this input.\n   */\n  enableEventType(eventType, enabled) {\n    if (eventType === EVENT_TYPE) {\n      this.options.enable = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    if (!this.options.enable) {\n      return;\n    }\n\n    this.callback({\n      type: EVENT_TYPE,\n      center: {\n        x: event.clientX,\n        y: event.clientY\n      },\n      srcEvent: event,\n      pointerType: 'mouse',\n      target: event.target\n    });\n  }\n}\n","/* Constants */\nconst DOWN_EVENT = 1;\nconst MOVE_EVENT = 2;\nconst UP_EVENT = 4;\nconst MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n};\n\n// MouseEvent.which https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\nconst MOUSE_EVENT_WHICH_LEFT = 1;\nconst MOUSE_EVENT_WHICH_MIDDLE = 2;\nconst MOUSE_EVENT_WHICH_RIGHT = 3;\n// MouseEvent.button https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\nconst MOUSE_EVENT_BUTTON_LEFT = 0;\nconst MOUSE_EVENT_BUTTON_MIDDLE = 1;\nconst MOUSE_EVENT_BUTTON_RIGHT = 2;\n// MouseEvent.buttons https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\nconst MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nconst MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nconst MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\n\n/**\n * Extract the involved mouse button\n */\nexport function whichButtons(event) {\n  const eventType = MOUSE_EVENTS[event.srcEvent.type];\n  if (!eventType) {\n    // Not a mouse evet\n    return null;\n  }\n\n  const {buttons, button, which} = event.srcEvent;\n  let leftButton = false;\n  let middleButton = false;\n  let rightButton = false;\n\n  if (\n    // button is up, need to find out which one was pressed before\n    eventType === UP_EVENT ||\n    // moving but does not support `buttons` API\n    (eventType === MOVE_EVENT && !Number.isFinite(buttons))\n  ) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {leftButton, middleButton, rightButton};\n}\n\n/**\n * Calculate event position relative to the root element\n */\nexport function getOffsetPosition(event, rootElement) {\n  const {srcEvent} = event;\n\n  // `center` is a hammer.js event property\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    // Not a gestural event\n    return null;\n  }\n\n  const center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n\n  const rect = rootElement.getBoundingClientRect();\n\n  // Fix scale for map affected by a CSS transform.\n  // See https://stackoverflow.com/a/26893663/3528533\n  const scaleX = rect.width / rootElement.offsetWidth;\n  const scaleY = rect.height / rootElement.offsetHeight;\n\n  // Calculate center relative to the root element\n  const offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n\n  return {center, offsetCenter};\n}\n","import {whichButtons, getOffsetPosition} from './event-utils';\n\nexport default class EventRegistrar {\n  constructor(eventManager) {\n    this.eventManager = eventManager;\n    this.handlers = [];\n    // Element -> handler map\n    this.handlersByElement = new Map();\n\n    this.handleEvent = this.handleEvent.bind(this);\n  }\n\n  isEmpty() {\n    return this.handlers.length === 0;\n  }\n\n  add(type, handler, srcElement = 'root') {\n    const {handlers, handlersByElement} = this;\n\n    if (!handlersByElement.has(srcElement)) {\n      handlersByElement.set(srcElement, []);\n    }\n    const entry = {type, handler, srcElement};\n    handlers.push(entry);\n    handlersByElement.get(srcElement).push(entry);\n  }\n\n  remove(type, handler) {\n    const {handlers, handlersByElement} = this;\n\n    for (let i = handlers.length - 1; i >= 0; i--) {\n      const entry = handlers[i];\n\n      if (entry.type === type && entry.handler === handler) {\n        handlers.splice(i, 1);\n        const entries = handlersByElement.get(entry.srcElement);\n        entries.splice(entries.indexOf(entry), 1);\n        if (entries.length === 0) {\n          handlersByElement.delete(entry.srcElement);\n        }\n      }\n    }\n  }\n\n  /**\n   * Handles hammerjs event\n   */\n  handleEvent(event) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    const mjolnirEvent = this._normalizeEvent(event);\n    let target = event.srcEvent.target;\n\n    while (target && target !== mjolnirEvent.rootElement) {\n      this._emit(mjolnirEvent, target);\n      if (mjolnirEvent.handled) {\n        return;\n      }\n      target = target.parentNode;\n    }\n    this._emit(mjolnirEvent, 'root');\n  }\n\n  /**\n   * Invoke handlers on a particular element\n   */\n  _emit(event, srcElement) {\n    const entries = this.handlersByElement.get(srcElement);\n\n    if (entries) {\n      let immediatePropagationStopped = false;\n\n      // Prevents the current event from bubbling up\n      const stopPropagation = () => {\n        event.handled = true;\n      };\n      // Prevent any remaining listeners from being called\n      const stopImmediatePropagation = () => {\n        event.handled = true;\n        immediatePropagationStopped = true;\n      };\n      for (let i = 0; i < entries.length; i++) {\n        const {type, handler} = entries[i];\n        handler(\n          Object.assign({}, event, {\n            type,\n            stopPropagation,\n            stopImmediatePropagation\n          })\n        );\n        if (immediatePropagationStopped) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * Normalizes hammerjs and custom events to have predictable fields.\n   */\n  _normalizeEvent(event) {\n    const rootElement = this.eventManager.element;\n\n    return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n      handled: false,\n      rootElement\n    });\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport Hammer from './utils/hammer';\nimport HammerManagerMock from './utils/hammer-manager-mock';\n\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\n\nimport EventRegistrar from './utils/event-registrar';\n\nimport {\n  BASIC_EVENT_ALIASES,\n  EVENT_RECOGNIZER_MAP,\n  GESTURE_EVENT_ALIASES,\n  RECOGNIZERS,\n  RECOGNIZER_COMPATIBLE_MAP,\n  RECOGNIZER_FALLBACK_MAP\n} from './constants';\n\nconst DEFAULT_OPTIONS = {\n  // event handlers\n  events: null,\n  // custom recognizers\n  recognizers: null,\n  recognizerOptions: {},\n  // Manager class\n  Manager: Hammer ? Hammer.Manager : HammerManagerMock,\n  // allow browser default touch action\n  // https://github.com/uber/react-map-gl/issues/506\n  touchAction: 'none'\n};\n\n// Unified API for subscribing to events about both\n// basic input events (e.g. 'mousemove', 'touchstart', 'wheel')\n// and gestural input (e.g. 'click', 'tap', 'panstart').\n// Delegates gesture related event registration and handling to Hammer.js.\nexport default class EventManager {\n  constructor(element = null, options = {}) {\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n\n    this.setElement(element);\n\n    // Register all passed events.\n    const {events} = options;\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  setElement(element) {\n    if (this.element) {\n      // unregister all events\n      this.destroy();\n    }\n    this.element = element;\n    if (!element) {\n      return;\n    }\n\n    const {options} = this;\n    const ManagerClass = options.Manager;\n\n    this.manager = new ManagerClass(element, {\n      touchAction: options.touchAction,\n      recognizers: options.recognizers || RECOGNIZERS\n    }).on('hammer.input', this._onBasicInput);\n\n    if (!options.recognizers) {\n      // Set default recognize withs\n      // http://hammerjs.github.io/recognize-with/\n      Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(name => {\n        const recognizer = this.manager.get(name);\n        if (recognizer) {\n          RECOGNIZER_COMPATIBLE_MAP[name].forEach(otherName => {\n            recognizer.recognizeWith(otherName);\n          });\n        }\n      });\n    }\n\n    // Set recognizer options\n    for (const recognizerName in options.recognizerOptions) {\n      const recognizer = this.manager.get(recognizerName);\n      if (recognizer) {\n        const recognizerOption = options.recognizerOptions[recognizerName];\n        // `enable` is managed by the event registrations\n        delete recognizerOption.enable;\n        recognizer.set(recognizerOption);\n      }\n    }\n\n    // Handle events not handled by Hammer.js:\n    // - mouse wheel\n    // - pointer/touch/mouse move\n    this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.moveInput = new MoveInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.keyInput = new KeyInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n      enable: false\n    });\n\n    // Register all existing events\n    for (const [eventAlias, eventRegistrar] of this.events) {\n      if (!eventRegistrar.isEmpty()) {\n        // Enable recognizer for this event.\n        this._toggleRecognizer(eventRegistrar.recognizerName, true);\n        this.manager.on(eventAlias, eventRegistrar.handleEvent);\n      }\n    }\n  }\n\n  // Tear down internal event management implementations.\n  destroy() {\n    if (this.element) {\n      // wheelInput etc. are created in setElement() and therefore\n      // cannot exist if there is no element\n      this.wheelInput.destroy();\n      this.moveInput.destroy();\n      this.keyInput.destroy();\n      this.contextmenuInput.destroy();\n      this.manager.destroy();\n\n      this.wheelInput = null;\n      this.moveInput = null;\n      this.keyInput = null;\n      this.contextmenuInput = null;\n      this.manager = null;\n      this.element = null;\n    }\n  }\n\n  // Register an event handler function to be called on `event`.\n  on(event, handler, srcElement) {\n    if (typeof event === 'string') {\n      this._addEventHandler(event, handler, srcElement);\n    } else {\n      srcElement = handler;\n      // If `event` is a map, call `on()` for each entry.\n      for (const eventName in event) {\n        this._addEventHandler(eventName, event[eventName], srcElement);\n      }\n    }\n  }\n\n  /**\n   * Deregister a previously-registered event handler.\n   * @param {string|Object} event   An event name (String) or map of event names to handlers\n   * @param {Function} [handler]    The function to be called on `event`.\n   */\n  off(event, handler) {\n    if (typeof event === 'string') {\n      this._removeEventHandler(event, handler);\n    } else {\n      // If `event` is a map, call `off()` for each entry.\n      for (const eventName in event) {\n        this._removeEventHandler(eventName, event[eventName]);\n      }\n    }\n  }\n\n  /*\n   * Enable/disable recognizer for the given event\n   */\n  _toggleRecognizer(name, enabled) {\n    const {manager} = this;\n    if (!manager) {\n      return;\n    }\n    const recognizer = manager.get(name);\n    if (recognizer && recognizer.options.enable !== enabled) {\n      recognizer.set({enable: enabled});\n\n      const fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n      if (fallbackRecognizers && !this.options.recognizers) {\n        // Set default require failures\n        // http://hammerjs.github.io/require-failure/\n        fallbackRecognizers.forEach(otherName => {\n          const otherRecognizer = manager.get(otherName);\n          if (enabled) {\n            // Wait for this recognizer to fail\n            otherRecognizer.requireFailure(name);\n            /**\n             * This seems to be a bug in hammerjs:\n             * requireFailure() adds both ways\n             * dropRequireFailure() only drops one way\n             * https://github.com/hammerjs/hammer.js/blob/master/src/recognizerjs/\n               recognizer-constructor.js#L136\n             */\n            recognizer.dropRequireFailure(otherName);\n          } else {\n            // Do not wait for this recognizer to fail\n            otherRecognizer.dropRequireFailure(name);\n          }\n        });\n      }\n    }\n    this.wheelInput.enableEventType(name, enabled);\n    this.moveInput.enableEventType(name, enabled);\n    this.keyInput.enableEventType(name, enabled);\n    this.contextmenuInput.enableEventType(name, enabled);\n  }\n\n  /**\n   * Process the event registration for a single event + handler.\n   */\n  _addEventHandler(event, handler, srcElement) {\n    const {manager, events} = this;\n    // Alias to a recognized gesture as necessary.\n    const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n\n    let eventRegistrar = events.get(eventAlias);\n    if (!eventRegistrar) {\n      eventRegistrar = new EventRegistrar(this);\n      events.set(eventAlias, eventRegistrar);\n      // Enable recognizer for this event.\n      eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n      // Listen to the event\n      if (manager) {\n        manager.on(eventAlias, eventRegistrar.handleEvent);\n      }\n    }\n    this._toggleRecognizer(eventRegistrar.recognizerName, true);\n    eventRegistrar.add(event, handler, srcElement);\n  }\n\n  /**\n   * Process the event deregistration for a single event + handler.\n   */\n  _removeEventHandler(event, handler) {\n    const {events} = this;\n    // Alias to a recognized gesture as necessary.\n    const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n\n    const eventRegistrar = events.get(eventAlias);\n\n    if (!eventRegistrar) {\n      return;\n    }\n\n    eventRegistrar.remove(event, handler);\n\n    if (eventRegistrar.isEmpty()) {\n      const {recognizerName} = eventRegistrar;\n      // Disable recognizer if no more handlers are attached to its events\n      let isRecognizerUsed = false;\n      for (const eh of events.values()) {\n        if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n          isRecognizerUsed = true;\n          break;\n        }\n      }\n      if (!isRecognizerUsed) {\n        this._toggleRecognizer(recognizerName, false);\n      }\n    }\n  }\n\n  /**\n   * Handle basic events using the 'hammer.input' Hammer.js API:\n   * Before running Recognizers, Hammer emits a 'hammer.input' event\n   * with the basic event info. This function emits all basic events\n   * aliased to the \"class\" of event received.\n   * See constants.BASIC_EVENT_CLASSES basic event class definitions.\n   */\n  _onBasicInput(event) {\n    const {srcEvent} = event;\n    const alias = BASIC_EVENT_ALIASES[srcEvent.type];\n    if (alias) {\n      // fire all events aliased to srcEvent.type\n      this.manager.emit(alias, event);\n    }\n  }\n\n  /**\n   * Handle events not supported by Hammer.js,\n   * and pipe back out through same (Hammer) channel used by other events.\n   */\n  _onOtherEvent(event) {\n    // console.log('onotherevent', event.type, event)\n    this.manager.emit(event.type, event);\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nexport {default as EventManager} from './event-manager';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nexport const EVENTS = [\n  'click',\n  'anyclick',\n  'contextmenu',\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n  'pointerover',\n  'pointerout',\n  'pointerleave',\n  'doubletap',\n  'pinchin',\n  'pinchout',\n  'pinchstart',\n  'pinchmove',\n  'pinchend',\n  'pinchcancel',\n  'rotatestart',\n  'rotatemove',\n  'rotateend',\n  'rotatecancel',\n  'panstart',\n  'panmove',\n  'panend',\n  'pancancel',\n  'panup',\n  'pandown',\n  'panleft',\n  'panright',\n  'swipe',\n  'swipeleft',\n  'swiperight',\n  'swipeup',\n  'swipedown',\n  'keydown',\n  'keyup',\n  'wheel'\n];\n\nexport const INITIAL_OPTIONS = {\n  click: true,\n  doubletap: true,\n  pinchstart: true,\n  pinchmove: true,\n  pinchend: true,\n  rotatestart: true,\n  rotatemove: true,\n  rotateend: true,\n  panstart: true,\n  panmove: true,\n  panend: true,\n  wheel: true\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport React, {Component, Fragment} from 'react';\nimport {render} from 'react-dom';\nimport {EventManager} from 'mjolnir.js';\n\nimport './style.css';\nimport {EVENTS, INITIAL_OPTIONS} from './constants';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this._onLoad = this._onLoad.bind(this);\n    this._onLoadRedBox = this._onLoadRedBox.bind(this);\n    this._onUpdateOption = this._onUpdateOption.bind(this);\n    this._handleEvent = this._handleEvent.bind(this);\n    this._renderCheckbox = this._renderCheckbox.bind(this);\n\n    this.eventListeners = {};\n    EVENTS.forEach(eventName => {\n      if (INITIAL_OPTIONS[eventName]) {\n        this.eventListeners[eventName] = this._handleEvent;\n      }\n    });\n\n    this._eventManager = new EventManager(null, {\n      events: this.eventListeners\n    });\n\n    this.state = {\n      events: [],\n      options: INITIAL_OPTIONS\n    };\n  }\n\n  _onLoad(ref) {\n    this._eventManager.setElement(ref);\n  }\n\n  _onLoadRedBox(ref) {\n    if (ref) {\n      this._eventManager.on(this.eventListeners, ref);\n    }\n    this._redBox = ref;\n  }\n\n  _onUpdateOption(evt) {\n    const {name, checked} = evt.target;\n    if (checked) {\n      this.eventListeners[name] = this._handleEvent;\n      this._eventManager.on(name, this._handleEvent);\n      this._eventManager.on(name, this._handleEvent, this._redBox);\n    } else {\n      delete this.eventListeners[name];\n      this._eventManager.off(name, this._handleEvent);\n      this._eventManager.off(name, this._handleEvent, this._redBox);\n    }\n    this.setState({\n      options: Object.assign({}, this.state.options, {[name]: checked})\n    });\n  }\n\n  _handleEvent(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    const events = this.state.events.slice(0, 30);\n    events.unshift(evt);\n    this.setState({events});\n  }\n\n  _renderCheckbox(eventName) {\n    const {options} = this.state;\n    const id = `input-${eventName}`;\n\n    return (\n      <div key={eventName}>\n        <input\n          id={id}\n          type=\"checkbox\"\n          name={eventName}\n          checked={options[eventName] || false}\n          onChange={this._onUpdateOption}\n        />\n        <label htmlFor={id}>{eventName}</label>\n      </div>\n    );\n  }\n\n  _renderEvent(evt, index) {\n    return (\n      <div key={index}>\n        <span key=\"type\">{evt.type}</span>\n        <span key=\"position\">\n          {evt.offsetCenter\n            ? `(${evt.offsetCenter.x.toFixed(0)}, ${evt.offsetCenter.y.toFixed(0)})`\n            : ''}\n        </span>\n        <span key=\"button\">\n          {evt.key ||\n            (evt.leftButton && 'left button') ||\n            (evt.middleButton && 'middle button') ||\n            (evt.rightButton && 'right button')}\n        </span>\n        <span key=\"target\">{evt.target.id}</span>\n      </div>\n    );\n  }\n\n  render() {\n    const {events} = this.state;\n\n    return (\n      <Fragment>\n        <div id=\"container\" ref={this._onLoad}>\n          <div id=\"red-box\" ref={this._onLoadRedBox} />\n        </div>\n\n        <div id=\"logs\">{events.map(this._renderEvent)}</div>\n\n        <div id=\"options\">{EVENTS.map(this._renderCheckbox)}</div>\n      </Fragment>\n    );\n  }\n}\n\nexport function renderToDOM(container) {\n  render(<App />, container);\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global'\n\n/* global window, global, document, navigator */\nexport const userAgent =\n  typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\n\nconst window_ = typeof window !== 'undefined' ? window : global;\nconst global_ = typeof global !== 'undefined' ? global : window;\nconst document_ = typeof document !== 'undefined' ? document : {};\n\nexport {window_ as window, global_ as global, document_ as document};\n\n/*\n * Detect whether passive option is supported by the current browser.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener\n   #Safely_detecting_option_support\n */\nlet passiveSupported = false;\n\n/* eslint-disable accessor-pairs, no-empty */\ntry {\n  const options = {\n    // This function will be called when the browser\n    // attempts to access the passive property.\n    get passive() {\n      passiveSupported = true;\n      return true;\n    }\n  };\n\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport {passiveSupported};\n"],"sourceRoot":""}